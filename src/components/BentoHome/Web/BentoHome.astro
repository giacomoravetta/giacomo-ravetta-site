---
import BentoDandD from "./BentoDandD.astro";
import BentoMarquee from "./BentoMarquee.astro";
import BentoCiao from "./BentoCiao.astro";
import BentoLinks from "./BentoLinks.astro";
import BentoHireMe from "./BentoHireMe.astro";
import BentoProfileCard from "../BentoProfileCard.astro";
import BentoWhaleCard from "./BentoWhaleCard.astro";
---

<div class="flex flex-col min-h-[100dvh] md:h-[100dvh] w-full gap-2 md:gap-[1.6dvw] p-2 md:p-[1.6dvw] md:overflow-hidden">
    <!-- Header - Fixed height -->
    <div class="border-white border-1 rounded-md md:rounded-xl h-[6dvh] md:h-[8dvh] text-white flex justify-between items-center overflow-hidden flex-shrink-0">
        <div class="flex items-center h-full gap-1 pl-2">
            <p class="font-inter font-black text-[4dvw] md:text-[2dvw] lg:text-4xl m-0 truncate">GIACOMO RAVETTA</p>
            <p class="pipe font-inter font-black text-[3dvw] md:text-[2dvw] lg:text-4xl">|</p>
        </div>
        <a href="mailto:info@giacomoravetta.com"
           class="flex items-center h-full text-[2.5dvw] md:text-[1.6dvw] lg:text-base text-black px-2 md:px-4
                  transition-all duration-400 ease-out
                  bg-white
                  hover:shadow-[0_0_40px_rgba(255,255,255,0.8),0_0_80px_rgba(255,255,255,0.5)]
                  active:shadow-[0_0_50px_rgba(255,255,255,1),0_0_100px_rgba(255,255,255,0.8),0_0_150px_rgba(255,255,255,0.4)]
                  hover:bg-gradient-to-r hover:from-gray-50 hover:via-white hover:to-gray-50
                  active:bg-gradient-to-r active:from-blue-50 active:via-white active:to-purple-50
                  hover:scale-[1.02] active:scale-[1.05]
                  hover:brightness-110 active:brightness-125
                  relative overflow-hidden rounded-r-md md:rounded-r-xl
                  before:absolute before:inset-0 before:bg-gradient-to-r
                  before:from-transparent before:via-white before:to-transparent
                  before:translate-x-[-100%] before:opacity-0
                  hover:before:translate-x-[100%] hover:before:opacity-60
                  active:before:translate-x-[100%] active:before:opacity-80
                  before:transition-all before:duration-500 before:ease-out
                  after:absolute after:inset-0 after:bg-gradient-to-r
                  after:from-transparent after:via-blue-200 after:to-transparent
                  after:translate-x-[100%] after:opacity-0
                  active:after:translate-x-[-100%] active:after:opacity-50
                  after:transition-all after:duration-600 after:ease-out
                  font-medium hover:text-gray-800 active:text-blue-900
                  border border-gray-200 hover:border-gray-300 active:border-blue-300
                  min-w-0 shrink">
           <span class="truncate">info@giacomoravetta.com</span>
        </a>
    </div>

    <!-- Main content area - Takes remaining space -->
    <div class="flex flex-col md:flex-row gap-2 md:gap-[1.6dvw] flex-1 min-h-0">
        <!-- Profile Card - Full height on mobile, 30% width on desktop -->
        <div class=" md:h-auto w-full md:w-[30%] md:order-2 flex-shrink-0">
            <BentoProfileCard class="h-full" />
        </div>

        <!-- Left column - D&D and Whale - Below profile on mobile, 70% width on desktop -->
        <div class="flex flex-col gap-2 md:gap-[1.6dvw] md:flex-1 md:w-[70%] md:order-1 md:min-h-0">
            <div class="h-[40vh] md:h-auto md:flex-1 md:min-h-0">
                <BentoDandD class="h-full" />
            </div>
            <div class="h-[40vh] md:h-auto md:flex-1 md:min-h-0">
                <BentoWhaleCard class="h-full" />
            </div>
        </div>
    </div>

    <!-- Bottom section - Marquee and buttons -->
    <div class="flex flex-col gap-2 md:gap-[1.6dvw] flex-shrink-0">
        <!-- Marquee -->
        <div class="h-[8dvh] md:h-[10dvh]">
            <BentoMarquee />
        </div>

        <!-- Bottom buttons -->
        <div class="flex flex-col md:flex-row gap-2 md:gap-[1.6dvw] h-[12dvh] md:h-[8dvh]">
            <div class="flex-1">
                <BentoLinks class="h-full" />
            </div>
            <div class="flex-1">
                <BentoCiao class="h-full" />
            </div>
            <div class="flex-1">
                <BentoHireMe class="h-full" />
            </div>
        </div>
    </div>
</div>

<style>
.pipe {
  animation: blink 1.5s step-end infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}
</style>
