---
import BentoCard from "../../BentoCard.astro";
---

<BentoCard backgroundColor="#FFC845">
  <div class="flex items-center justify-center w-full h-full bg-[#e5e5f7] opacity-80 bg-[repeating-radial-gradient(circle_at_0_0,transparent_0,#e5e5f7_10px),repeating-linear-gradient(#ffc845,#444cf7)] overflow-hidden">
    <div class="whale-wrapper relative w-[80%] flex items-center justify-center" id="whaleWrapper">
      <img
        src="/blue-whale-hor.webp"
        alt="A whale"
      />
    </div>
  </div>
</BentoCard>

<style>
  .whale-wrapper:hover {
    -webkit-animation: shake-horizontal 3s cubic-bezier(0.455, 0.03, 0.515, 0.955) both;
    animation: shake-horizontal 3s cubic-bezier(0.455, 0.03, 0.515, 0.955) both;
  }

  .shake-animation {
    -webkit-animation: shake-horizontal 3s cubic-bezier(0.455, 0.03, 0.515, 0.955) both;
    animation: shake-horizontal 3s cubic-bezier(0.455, 0.03, 0.515, 0.955) both;
  }

  @-webkit-keyframes shake-horizontal {
    0%, 100% { -webkit-transform: translateX(0); transform: translateX(0); }
    10%, 30%, 50%, 70% { -webkit-transform: translateX(-10px); transform: translateX(-10px); }
    20%, 40%, 60% { -webkit-transform: translateX(10px); transform: translateX(10px); }
    80% { -webkit-transform: translateX(8px); transform: translateX(8px); }
    90% { -webkit-transform: translateX(-8px); transform: translateX(-8px); }
  }

  @keyframes shake-horizontal {
    0%, 100% { -webkit-transform: translateX(0); transform: translateX(0); }
    10%, 30%, 50%, 70% { -webkit-transform: translateX(-10px); transform: translateX(-10px); }
    20%, 40%, 60% { -webkit-transform: translateX(10px); transform: translateX(10px); }
    80% { -webkit-transform: translateX(8px); transform: translateX(8px); }
    90% { -webkit-transform: translateX(-8px); transform: translateX(-8px); }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const whaleWrapper = document.getElementById('whaleWrapper');

    if (whaleWrapper) {
      whaleWrapper.addEventListener('touchstart', () => {
        // Remove animation if it's still playing
        whaleWrapper.classList.remove('shake-animation');

        // Trigger reflow to restart animation
        void whaleWrapper.offsetWidth;

        // Add animation class
        whaleWrapper.classList.add('shake-animation');
      });

      // Remove the animation class when animation ends
      whaleWrapper.addEventListener('animationend', () => {
        whaleWrapper.classList.remove('shake-animation');
      });
    }
  });
</script>
