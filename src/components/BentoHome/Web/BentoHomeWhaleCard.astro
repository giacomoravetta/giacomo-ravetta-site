---
import { Image } from "astro:assets";
import blueWhale from "../../../images/blue-whale.webp";
import BentoCard from "../../BentoCard.astro";
---

<BentoCard backgroundColor="#FFC845">
  <div class="whale">
    <div class="whale-wrapper">
      <Image src={blueWhale} width={419} alt="A whale" class="whale-image" />
    </div>
  </div>
</BentoCard>

<style>
  .whale {
    display: flex;
    transform-origin: center;
    flex-grow: 1;
    justify-content: center;
    align-items: center;
    background-color: #e5e5f7;
    opacity: 0.8;
    background-image: repeating-radial-gradient(
        circle at 0 0,
        transparent 0,
        #e5e5f7 10px
      ),
      repeating-linear-gradient(#ffc845, #444cf7);
    overflow: hidden; /* Ensure the whale doesn't overflow the container */
  }

  .whale-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    cursor: pointer; /* Indicate that the image is clickable */
    transition: opacity 0.5s; /* Transition for smooth fading */
  }

  .whale-wrapper {
    height: 200px;
    width: 100%;
    padding: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  @keyframes swim {
    0% {
      transform: translateY(0) rotate(0deg) scale(1);
      opacity: 1;
    }

    10% {
      transform: translateY(-50%) rotate(-15deg);
      opacity: 1;
    }

    20% {
      transform: translateY(-100%) rotate(15deg);
      opacity: 1;
    }

    24% {
      transform: translateY(-150%) rotate(-15deg);
      opacity: 0;
    }

    26% {
      transform: translateY(110%);
      opacity: 0;
    }

    28% {
      opacity: 1;
    }

    35% {
      transform: translateY(100%) scale(1.5);
    }

    60% {
      transform: translateY(75%) scale(3);
    }

    70% {
      transform: translateY(30%) scale(3);
    }
    80% {
      transform: translateY(15%) translateX(10%) scale(2);
    }
    90% {
      transform: translateY(2%) translateX(-10%) rotate(10deg) scale(1);
    }
    92% {
      transform: translateY(0) rotate(20deg) scale(1);
    }
    99% {
      transform: rotate(20deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }

  .whale-image.animate {
    animation: swim 15s linear;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const whale = document.querySelector(".whale-image");

    const handleClick = () => {
      // Add the animate class to trigger CSS animation
      whale.classList.add("animate");

      // Remove the class after the animation ends for potential re-triggering
      whale.addEventListener(
        "animationend",
        () => {
          whale.classList.remove("animate");
        },
        { once: true }
      );
    };

    whale.addEventListener("click", handleClick);
  });
</script>
