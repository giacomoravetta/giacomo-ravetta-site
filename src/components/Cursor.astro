<!-- Eye Element -->
<div class="eye" id="eye">
  <div class="iris">
    <div class="pupil"></div>
  </div>
</div>

<style>
  .eye {
    position: absolute;
    width: 150px;
    height: 150px;
    background: #fff;
    border: 5px solid #000;
    border-radius: 50%;
    overflow: hidden;
    pointer-events: none; /* Allow mouse events to pass through */
  }

  .iris {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 70px;
    height: 70px;
    background: #00aaff;
    border-radius: 50%;
    transform: translate(-50%, -50%);
  }

  .pupil {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 30px;
    height: 30px;
    background: #000;
    border-radius: 50%;
    transform: translate(-50%, -50%);
  }
</style>

<!-- Client-Side Script -->
<script is:inline>
  const eye = document.getElementById("eye");
  const iris = eye.querySelector(".iris");

  document.addEventListener("mousemove", (event) => {
    // Move the eye to the cursor position
    eye.style.left = `${event.pageX - eye.offsetWidth / 2}px`;
    eye.style.top = `${event.pageY - eye.offsetHeight / 2}px`;

    // Eye's center position
    const eyeX = event.pageX;
    const eyeY = event.pageY;

    // Find the closest target element
    const target = document.querySelector("." + event.target.className);

    const rect = target.getBoundingClientRect();
    const targetX = rect.left + rect.width / 2 + window.scrollX;
    const targetY = rect.top + rect.height / 2 + window.scrollY;
    const closestTarget = { x: targetX, y: targetY };

    const angle = Math.atan2(closestTarget.y - eyeY, closestTarget.x - eyeX);

    // Move the iris/pupil towards the angle
    const irisMovementRadius = 25; // Adjust for movement range
    const x = Math.cos(angle) * irisMovementRadius;
    const y = Math.sin(angle) * irisMovementRadius;

    iris.style.transform = `translate(${x - 50}%, ${y - 50}%)`;
  });
</script>
